<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mockup: V√≠ ƒêi·ªán T·ª≠ ƒêa NgƒÉn</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #E0E0E0; display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 1rem;}
        .mobile-mockup {
            width: 375px; /* iPhone X width */
            height: 812px; /* iPhone X height */
            background-color: #FFFFFF;
            border-radius: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            border: 8px solid #111;
        }
        .app-header {
            background-color: #0077B6; /* Primary Blue */
            color: white;
            padding: 1rem;
            text-align: center;
            font-weight: 600;
            font-size: 1.125rem; /* text-lg */
            flex-shrink: 0;
        }
        .app-content {
            flex-grow: 1;
            overflow-y: auto;
            padding: 1rem;
            background-color: #F7F7F7; /* Light Background */
        }
        .bottom-nav {
            display: flex;
            justify-content: space-around;
            align-items: center;
            background-color: #FFFFFF;
            border-top: 1px solid #E5E7EB; /* gray-200 */
            padding: 0.5rem 0;
            flex-shrink: 0;
        }
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #6B7280; /* gray-500 */
            font-size: 0.75rem; /* text-xs */
            padding: 0.5rem;
            cursor: pointer;
            transition: color 0.2s;
        }
        .nav-item.active, .nav-item:hover {
            color: #0077B6; /* Primary Blue */
        }
        .nav-item svg { width: 24px; height: 24px; margin-bottom: 0.25rem; }

        .compartment-card {
            background-color: white;
            border-radius: 0.75rem; /* rounded-xl */
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
            border-left: 5px solid;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .compartment-card:hover {
            transform: translateY(-2px);
        }
        .action-button {
            background-color: #00B4D8; /* Secondary Blue */
            color: white;
            padding: 0.75rem;
            border-radius: 0.5rem; /* rounded-lg */
            text-align: center;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .action-button:hover {
            background-color: #009CC5; /* Darker Secondary Blue */
        }
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        .modal-content {
            background-color: white;
            padding: 1.5rem;
            border-radius: 0.75rem;
            width: 90%;
            max-width: 340px; /* Fit within mobile mockup */
        }
        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #D1D5DB; /* gray-300 */
            border-radius: 0.375rem; /* rounded-md */
            margin-bottom: 1rem;
        }
        .primary-btn {
            background-color: #0077B6; color: white; padding: 0.75rem 1.5rem; border-radius: 0.375rem; font-weight: 500;
        }
        .secondary-btn {
            background-color: #E5E7EB; color: #374151; padding: 0.75rem 1.5rem; border-radius: 0.375rem; font-weight: 500;
        }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    </style>
</head>
<body>
    <div class="mobile-mockup">
        <div id="app-header" class="app-header">Trang Ch·ªß</div>
        
        <div class="app-content">
            <div id="dashboardScreen">
                <div class="mb-6 p-4 bg-gradient-to-r from-[#0077B6] to-[#00B4D8] text-white rounded-xl shadow-lg">
                    <p class="text-sm opacity-80">T·ªïng S·ªë D∆∞</p>
                    <p class="text-3xl font-bold">50.000.000 ‚Ç´</p>
                </div>

                <h3 class="text-lg font-semibold text-[#03045E] mb-3">C√°c NgƒÉn V√≠ C·ªßa B·∫°n</h3>
                <div id="compartmentList">
                    </div>
                <button id="addCompartmentBtn" class="w-full mt-2 p-3 bg-[#90E0EF] text-[#03045E] rounded-lg font-semibold hover:bg-[#7DDCEF] transition-colors">
                    + T·∫°o NgƒÉn V√≠ M·ªõi
                </button>

                <h3 class="text-lg font-semibold text-[#03045E] mt-8 mb-3">Giao D·ªãch Nhanh</h3>
                <div class="grid grid-cols-3 gap-3">
                    <div id="quickDepositBtn" class="action-button text-sm">üì• N·∫°p Ti·ªÅn</div>
                    <div id="quickTransferBtn" class="action-button text-sm">üí∏ Chuy·ªÉn Ti·ªÅn</div>
                    <div id="quickPayBtn" class="action-button text-sm">üßæ Thanh To√°n</div>
                </div>
            </div>

            <div id="historyScreen" class="hidden">
                <h3 class="text-lg font-semibold text-[#03045E] mb-4">L·ªãch S·ª≠ Giao D·ªãch</h3>
                <div id="transactionList" class="space-y-3">
                    <div class="p-3 bg-white rounded-lg shadow">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="font-medium text-[#03045E]">Thanh to√°n ti·ªÅn ƒëi·ªán</p>
                                <p class="text-xs text-slate-500">T·ª´: Chi ti√™u h√†ng ng√†y</p>
                            </div>
                            <p class="font-semibold text-red-500">- 500.000 ‚Ç´</p>
                        </div>
                        <p class="text-xs text-slate-400 mt-1">26/05/2025 - 09:30</p>
                    </div>
                    <div class="p-3 bg-white rounded-lg shadow">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="font-medium text-[#03045E]">Nh·∫≠n l∆∞∆°ng th√°ng 5</p>
                                <p class="text-xs text-slate-500">V√†o: Chi ti√™u h√†ng ng√†y</p>
                            </div>
                            <p class="font-semibold text-green-500">+ 20.000.000 ‚Ç´</p>
                        </div>
                        <p class="text-xs text-slate-400 mt-1">25/05/2025 - 14:00</p>
                    </div>
                     <div class="p-3 bg-white rounded-lg shadow">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="font-medium text-[#03045E]">Chuy·ªÉn v√†o NgƒÉn Ti·∫øt Ki·ªám</p>
                                <p class="text-xs text-slate-500">T·ª´: Chi ti√™u h√†ng ng√†y</p>
                            </div>
                            <p class="font-semibold text-orange-500">- 2.000.000 ‚Ç´</p>
                        </div>
                        <p class="text-xs text-slate-400 mt-1">25/05/2025 - 14:05</p>
                    </div>
                </div>
            </div>

            <div id="reportsScreen" class="hidden">
                <h3 class="text-lg font-semibold text-[#03045E] mb-4">B√°o C√°o T√†i Ch√≠nh</h3>
                <div class="card">
                    <h4 class="font-semibold text-[#0077B6] text-md mb-3">Ph√¢n Lo·∫°i Chi Ti√™u Th√°ng N√†y</h4>
                    <div class="chart-container h-64">
                        <canvas id="expenseReportChart"></canvas>
                    </div>
                </div>
                <div class="card mt-4">
                    <h4 class="font-semibold text-[#0077B6] text-md mb-2">Th·ªëng K√™ Nhanh</h4>
                    <p class="text-sm text-slate-600">T·ªïng thu: <span class="font-semibold text-green-500">25.000.000 ‚Ç´</span></p>
                    <p class="text-sm text-slate-600">T·ªïng chi: <span class="font-semibold text-red-500">10.500.000 ‚Ç´</span></p>
                    <p class="text-sm text-slate-600">Ti·∫øt ki·ªám ƒë∆∞·ª£c: <span class="font-semibold text-[#0077B6]">5.000.000 ‚Ç´</span></p>
                </div>
            </div>
             <div id="compartmentsScreen" class="hidden">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold text-[#03045E]">Qu·∫£n L√Ω NgƒÉn V√≠</h3>
                    <button id="manageAddCompartmentBtn" class="text-sm bg-[#00B4D8] text-white py-1 px-3 rounded-md hover:bg-[#009CC5]">+ Th√™m NgƒÉn</button>
                </div>
                <div id="detailedCompartmentList" class="space-y-3">
                    </div>
            </div>


        </div> <div class="bottom-nav">
            <div class="nav-item active" data-screen="dashboardScreen" data-title="Trang Ch·ªß">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
                Trang Ch·ªß
            </div>
            <div class="nav-item" data-screen="historyScreen" data-title="L·ªãch S·ª≠ Giao D·ªãch">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                L·ªãch S·ª≠
            </div>
             <div class="nav-item" data-screen="compartmentsScreen" data-title="NgƒÉn V√≠">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg>
                NgƒÉn V√≠
            </div>
            <div class="nav-item" data-screen="reportsScreen" data-title="B√°o C√°o">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                B√°o C√°o
            </div>
        </div>
    </div> <div id="addCompartmentModal" class="modal hidden">
        <div class="modal-content">
            <h3 class="text-xl font-semibold text-[#0077B6] mb-4">T·∫°o NgƒÉn V√≠ M·ªõi</h3>
            <input type="text" id="newCompartmentName" placeholder="T√™n ngƒÉn v√≠ (v√≠ d·ª•: Du l·ªãch h√®)" class="form-input">
            <input type="number" id="newCompartmentLimit" placeholder="H·∫°n m·ª©c (t√πy ch·ªçn)" class="form-input">
            <select id="newCompartmentIcon" class="form-input mb-4">
                <option value="üí∞">üí∞ Ti·ªÅn chung</option>
                <option value="üè¶">üè¶ Ti·∫øt ki·ªám</option>
                <option value="ÔøΩ">üìà ƒê·∫ßu t∆∞</option>
                <option value="‚úàÔ∏è">‚úàÔ∏è Du l·ªãch</option>
                <option value="üõçÔ∏è">üõçÔ∏è Mua s·∫Øm</option>
                <option value="üéì">üéì Gi√°o d·ª•c</option>
                 <option value="üè†">üè† Nh√† c·ª≠a</option>
            </select>
            <div class="flex justify-end space-x-3">
                <button id="cancelAddCompartment" class="secondary-btn">H·ªßy</button>
                <button id="confirmAddCompartment" class="primary-btn">T·∫°o NgƒÉn</button>
            </div>
        </div>
    </div>
    
    <div id="transferModal" class="modal hidden">
        <div class="modal-content">
            <h3 class="text-xl font-semibold text-[#0077B6] mb-4">Chuy·ªÉn Ti·ªÅn</h3>
            <select id="transferFromCompartment" class="form-input mb-2">
                <option value="">T·ª´ ngƒÉn...</option>
            </select>
            <select id="transferToCompartment" class="form-input mb-2">
                <option value="">ƒê·∫øn ngƒÉn...</option>
                <option value="external">Ng∆∞·ªùi kh√°c/Ng√¢n h√†ng kh√°c</option>
            </select>
            <input type="text" id="transferRecipient" placeholder="S·ªë t√†i kho·∫£n/SƒêT ng∆∞·ªùi nh·∫≠n (n·∫øu chuy·ªÉn ra ngo√†i)" class="form-input hidden">
            <input type="number" id="transferAmount" placeholder="S·ªë ti·ªÅn" class="form-input">
            <textarea id="transferNotes" placeholder="N·ªôi dung chuy·ªÉn ti·ªÅn (t√πy ch·ªçn)" class="form-input h-20"></textarea>
            <div class="flex justify-end space-x-3">
                <button id="cancelTransfer" class="secondary-btn">H·ªßy</button>
                <button id="confirmTransfer" class="primary-btn">Chuy·ªÉn</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const appHeader = document.getElementById('app-header');
            const screens = {
                dashboardScreen: document.getElementById('dashboardScreen'),
                historyScreen: document.getElementById('historyScreen'),
                reportsScreen: document.getElementById('reportsScreen'),
                compartmentsScreen: document.getElementById('compartmentsScreen'),
            };
            const navItems = document.querySelectorAll('.nav-item');
            const compartmentList = document.getElementById('compartmentList');
            const detailedCompartmentList = document.getElementById('detailedCompartmentList');
            
            const addCompartmentBtn = document.getElementById('addCompartmentBtn');
            const manageAddCompartmentBtn = document.getElementById('manageAddCompartmentBtn');
            const addCompartmentModal = document.getElementById('addCompartmentModal');
            const cancelAddCompartmentBtn = document.getElementById('cancelAddCompartment');
            const confirmAddCompartmentBtn = document.getElementById('confirmAddCompartment');
            const newCompartmentNameInput = document.getElementById('newCompartmentName');
            const newCompartmentIconSelect = document.getElementById('newCompartmentIcon');

            const quickTransferBtn = document.getElementById('quickTransferBtn');
            const transferModal = document.getElementById('transferModal');
            const cancelTransferBtn = document.getElementById('cancelTransfer');
            const confirmTransferBtn = document.getElementById('confirmTransfer');
            const transferFromSelect = document.getElementById('transferFromCompartment');
            const transferToSelect = document.getElementById('transferToCompartment');
            const transferRecipientInput = document.getElementById('transferRecipient');
            const transferAmountInput = document.getElementById('transferAmount');


            let compartmentsData = [
                { id: 1, name: 'Chi ti√™u h√†ng ng√†y', balance: 15350000, icon: 'üí∞', color: 'border-blue-500' },
                { id: 2, name: 'Ti·∫øt ki·ªám mua nh√†', balance: 25000000, icon: 'üè¶', color: 'border-green-500' },
                { id: 3, name: 'ƒê·∫ßu t∆∞ ch·ª©ng kho√°n', balance: 8500000, icon: 'üìà', color: 'border-yellow-500' },
                { id: 4, name: 'Du l·ªãch h√® 2026', balance: 1150000, icon: '‚úàÔ∏è', color: 'border-purple-500' },
            ];

            function formatCurrency(amount) {
                return amount.toLocaleString('vi-VN', { style: 'currency', currency: 'VND' });
            }

            function renderCompartments() {
                compartmentList.innerHTML = '';
                detailedCompartmentList.innerHTML = '';
                transferFromSelect.innerHTML = '<option value="">T·ª´ ngƒÉn...</option>';
                transferToSelect.innerHTML = '<option value="">ƒê·∫øn ngƒÉn...</option><option value="external">Ng∆∞·ªùi kh√°c/Ng√¢n h√†ng kh√°c</option>';

                compartmentsData.forEach(comp => {
                    // For dashboard
                    const card = document.createElement('div');
                    card.className = `compartment-card ${comp.color}`;
                    card.innerHTML = `
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <span class="text-2xl mr-3">${comp.icon}</span>
                                <div>
                                    <p class="font-semibold text-[#03045E]">${comp.name}</p>
                                    <p class="text-sm text-slate-600">${formatCurrency(comp.balance)}</p>
                                </div>
                            </div>
                            <span class="text-slate-400 text-xl">></span>
                        </div>
                    `;
                    card.addEventListener('click', () => showScreen('compartmentsScreen', 'Qu·∫£n L√Ω NgƒÉn V√≠')); // Navigate to compartment management on click
                    compartmentList.appendChild(card);

                    // For detailed list in compartments screen
                    const detailedCard = document.createElement('div');
                    detailedCard.className = `p-4 bg-white rounded-lg shadow mb-3 ${comp.color}`;
                    detailedCard.innerHTML = `
                        <div class="flex items-center justify-between">
                             <div class="flex items-center">
                                <span class="text-3xl mr-4">${comp.icon}</span>
                                <div>
                                    <p class="font-bold text-lg text-[#03045E]">${comp.name}</p>
                                    <p class="text-md text-slate-700">${formatCurrency(comp.balance)}</p>
                                </div>
                            </div>
                            <button class="text-xs bg-slate-200 hover:bg-slate-300 text-slate-700 py-1 px-2 rounded">C√†i ƒë·∫∑t</button>
                        </div>
                        <div class="mt-2 pt-2 border-t border-slate-200">
                            <p class="text-xs text-slate-500">H·∫°n m·ª©c: Ch∆∞a ƒë·∫∑t</p>
                            <p class="text-xs text-slate-500">Chuy·ªÉn t·ª± ƒë·ªông: T·∫Øt</p>
                        </div>
                    `;
                    detailedCompartmentList.appendChild(detailedCard);
                    
                    // For transfer modal selects
                    const optionFrom = document.createElement('option');
                    optionFrom.value = comp.id;
                    optionFrom.textContent = `${comp.icon} ${comp.name}`;
                    transferFromSelect.appendChild(optionFrom);

                    const optionTo = document.createElement('option');
                    optionTo.value = comp.id;
                    optionTo.textContent = `${comp.icon} ${comp.name}`;
                    transferToSelect.appendChild(optionTo);
                });
            }
            
            transferToSelect.addEventListener('change', function() {
                if (this.value === 'external') {
                    transferRecipientInput.classList.remove('hidden');
                } else {
                    transferRecipientInput.classList.add('hidden');
                }
            });


            function showScreen(screenId, title) {
                Object.values(screens).forEach(screen => screen.classList.add('hidden'));
                screens[screenId].classList.remove('hidden');
                appHeader.textContent = title;

                navItems.forEach(item => {
                    item.classList.remove('active');
                    if (item.dataset.screen === screenId) {
                        item.classList.add('active');
                    }
                });
                // Special case for report chart
                if (screenId === 'reportsScreen' && !window.expenseReportChartInstance) {
                    renderExpenseReportChart();
                }
            }

            navItems.forEach(item => {
                item.addEventListener('click', () => {
                    showScreen(item.dataset.screen, item.dataset.title);
                });
            });
            
            function openModal(modal) {
                modal.classList.remove('hidden');
            }
            function closeModal(modal) {
                modal.classList.add('hidden');
            }

            addCompartmentBtn.addEventListener('click', () => openModal(addCompartmentModal));
            manageAddCompartmentBtn.addEventListener('click', () => openModal(addCompartmentModal));
            cancelAddCompartmentBtn.addEventListener('click', () => closeModal(addCompartmentModal));
            
            confirmAddCompartmentBtn.addEventListener('click', () => {
                const name = newCompartmentNameInput.value.trim();
                const icon = newCompartmentIconSelect.value;
                if (name) {
                    const newId = compartmentsData.length > 0 ? Math.max(...compartmentsData.map(c => c.id)) + 1 : 1;
                    // Determine color based on existing logic or add new
                    const colors = ['border-red-500', 'border-indigo-500', 'border-pink-500', 'border-teal-500'];
                    const newColor = colors[newId % colors.length];

                    compartmentsData.push({ id: newId, name, balance: 0, icon, color: newColor });
                    renderCompartments();
                    newCompartmentNameInput.value = '';
                    closeModal(addCompartmentModal);
                } else {
                    alert("Vui l√≤ng nh·∫≠p t√™n ngƒÉn v√≠!");
                }
            });

            quickTransferBtn.addEventListener('click', () => {
                renderCompartments(); // Ensure select options are up-to-date
                openModal(transferModal);
            });
            cancelTransferBtn.addEventListener('click', () => closeModal(transferModal));
            confirmTransferBtn.addEventListener('click', () => {
                // Mock transfer logic
                alert(`ƒê√£ y√™u c·∫ßu chuy·ªÉn ${formatCurrency(parseFloat(transferAmountInput.value || 0))}. (Mockup)`);
                closeModal(transferModal);
                transferAmountInput.value = '';
            });


            function renderExpenseReportChart() {
                const expenseReportCtx = document.getElementById('expenseReportChart')?.getContext('2d');
                if (expenseReportCtx) {
                     if (typeof Chart !== 'undefined') { // Check if Chart is defined
                        window.expenseReportChartInstance = new Chart(expenseReportCtx, {
                            type: 'doughnut',
                            data: {
                                labels: ['ƒÇn u·ªëng', 'Di chuy·ªÉn', 'Mua s·∫Øm', 'Gi·∫£i tr√≠', 'H√≥a ƒë∆°n'],
                                datasets: [{
                                    label: 'Ph√¢n Lo·∫°i Chi Ti√™u',
                                    data: [35, 20, 25, 10, 10],
                                    backgroundColor: ['#0077B6', '#00B4D8', '#90E0EF', '#FFD166', '#FF6B6B'],
                                    borderColor: '#F7F7F7',
                                    borderWidth: 2
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    legend: { position: 'bottom', labels: { color: '#03045E'} },
                                    tooltip: {
                                        callbacks: {
                                            label: function(context) {
                                                let label = context.label || '';
                                                if (label) {
                                                    label += ': ';
                                                }
                                                if (context.parsed !== null) {
                                                    label += context.parsed + '%';
                                                }
                                                return label;
                                            }
                                        },
                                        backgroundColor: '#03045E', titleColor: '#CAF0F8', bodyColor: '#CAF0F8',
                                        borderColor: '#00B4D8', borderWidth: 1, padding: 10, cornerRadius: 6
                                    }
                                }
                            }
                        });
                    } else {
                        console.error("Chart.js is not loaded or Chart is not defined.");
                        // Optionally, display a message to the user in the chart container
                        expenseReportCtx.parentElement.innerHTML = "<p class='text-center text-red-500'>L·ªói t·∫£i bi·ªÉu ƒë·ªì. Vui l√≤ng th·ª≠ l·∫°i.</p>";
                    }
                }
            }
            
            // Initial render
            renderCompartments();
            showScreen('dashboardScreen', 'Trang Ch·ªß'); // Default screen
        });
    </script>
</body>
</html>
ÔøΩ